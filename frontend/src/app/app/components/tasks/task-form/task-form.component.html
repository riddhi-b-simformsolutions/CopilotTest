<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <h3 *ngIf="isEditMode">Edit Task</h3>
  <h3 *ngIf="!isEditMode">Create Task</h3>

  <!-- Success Message -->
  <div *ngIf="successMessage" class="success-message">
    ✅ {{ successMessage }}
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="error-message">
    ❌ {{ errorMessage }}
  </div>

  <div class="form-group">
    <label for="title">Title *</label>
    <input
      id="title"
      type="text"
      formControlName="title"
      [class.invalid]="shouldShowFieldError('title')"
      placeholder="Enter task title"
      [disabled]="isSaving" />
    <div class="field-error" *ngIf="shouldShowFieldError('title')">
      <span *ngIf="form.get('title')?.hasError('required')">Title is required</span>
      <span *ngIf="form.get('title')?.hasError('minlength')">Title must be at least 3 characters</span>
    </div>
  </div>

  <div class="form-group">
    <label for="description">Description</label>
    <textarea 
      id="description" 
      formControlName="description"
      rows="3"
      placeholder="Enter task description (optional)"
      [disabled]="isSaving"></textarea>
  </div>

  <div class="form-group">
    <label for="status">Status *</label>
    <select id="status" formControlName="status" [disabled]="isSaving">
      <option *ngFor="let s of statuses" [value]="s">
        {{ s === 'in-progress' ? 'In Progress' : (s | titlecase) }}
      </option>
    </select>
  </div>

  <div class="form-actions">
    <button type="submit" [disabled]="isSaving" class="submit-btn">
      <span *ngIf="isSaving" class="loading-spinner"></span>
      {{ isEditMode ? (isSaving ? 'Saving...' : 'Save Changes') : (isSaving ? 'Creating...' : 'Create Task') }}
    </button>
    <button type="button" (click)="onCancel()" [disabled]="isSaving" class="cancel-btn">
      Cancel
    </button>
  </div>
</form>
